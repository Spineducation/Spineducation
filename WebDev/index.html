<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Spineducation Main Site</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> 
<style type="text/css">
    .bs-example{
    	margin: 20px;
    }
	/* Fix alignment issue of label on extra small devices in Bootstrap 3.2 */
    .form-horizontal .control-label{
        padding-top: 7px;
    }
</style>
</head>
<body>
<div class="bs-example">
    <form class="form-horizontal" action="/examples/actions/confirmation.php" method="post">

        <div class="form-group">
            <label for="inputHistory" class="control-label col-xs-2">History</label>
            <div class="col-xs-10">
                <textarea type="textarea" class="form-control" id="inputEmail" placeholder="Description of patient history goes here." row="3" required></textarea>
            </div>
        </div>
        <div class="form-group">
            <label for="inputP" class="control-label col-xs-2">Physical</label>
            <div class="col-xs-10">
                <textarea type="textarea" class="form-control" id="inputPassword" placeholder="Results of patient physical exam go here." row="3" required></textarea>
            </div>
        </div>


    <form id="MCQform" method="post" class="form-horizontal">
    <div class="form-group">

    	<div class="col-xs-1">
            <button type="button" class="btn btn-default addButton"><i class="fa fa-plus"></i> + </button>
        </div>

        <label class="col-xs-1 control-label">Question</label>
        
        <div class="col-xs-4">
            <input type="text" class="form-control" name="MCQ[0].question" />
        </div>


        <div>
        	<label class="col-xs-1 control-label">A)</label>
            <input class="col-xs-4 control-label" type="text" class="form-control" name="MCQ[0].ans_a" />
        </div>

        <div>
        	<label class="col-xs-1 control-label">B)</label>
            <input class="col-xs-4 control-label" type="text" class="form-control" name="MCQ[0].ans_b" />
        </div>

        <div>
        	<label class="col-xs-1 control-label">C)</label>
            <input class="col-xs-4 control-label" type="text" class="form-control" name="MCQ[0].ans_c" />
        </div>

        <div>
        	<label class="col-xs-1 control-label">D)</label>
            <input class="col-xs-4 control-label" type="text" class="form-control" name="MCQ[0].ans_d" />
        </div>

        
    </div>

    <!-- The template for adding new field -->
    <div class="form-group hide" id="MCQformtemplate">
        <div class="col-xs-4 col-xs-offset-1">
            <input type="text" class="form-control" name="question" placeholder="Title" />
        </div>
        <div class="col-xs-4">
            <input type="text" class="form-control" name="ans_a" placeholder="ans_a" />
        </div>
        <div class="col-xs-2">
            <input type="text" class="form-control" name="price" placeholder="ans_b" />
        </div>
        <div class="col-xs-1">
            <button type="button" class="btn btn-default removeButton"><i class="fa fa-minus"></i></button>
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-5 col-xs-offset-1">
            <button type="submit" class="btn btn-primary">Submit This Case</button>
        </div>
    </div>
</form>





</div>



<script>
$(document).ready(function() {
    var questionValidators = {
            row: '.col-xs-4',   // The question is placed inside a <div class="col-xs-4"> element
            validators: {
                notEmpty: {
                    message: 'The question is equired'
                }
            }
        },
        ansaValidators = {
            row: '.col-xs-4',
            validators: {
                notEmpty: {
                    message: 'Option A is required.'
                }
            }
        },
        ansbValidators = {
            row: '.col-xs-4',
            validators: {
                notEmpty: {
                    message: 'Option B is required.'
                // },
                // ans_a: {
                //     message: 'The ans_a is not valid'
                }
            }
        },
        // anscValidators = {
        //     row: '.col-xs-4',
        //     validators: {
        //         notEmpty: {
        //             message: 'The ans_a is required'
        //         },
        //         ans_a: {
        //             message: 'The ans_a is not valid'
        //         }
        //     }
        // },
        // ansdValidators = {
        //     row: '.col-xs-2',
        //     validators: {
        //         notEmpty: {
        //             message: 'The price is required'
        //         }
        //     }
        // },
        bookIndex = 0;

    $('#bookForm')
        .formValidation({
            framework: 'bootstrap',
            icon: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                'MCQ[0].question': questionValidators,
                'MCQ[1].ans_a': ansaValidators,
                'MCQ[2].ans_b': ansbValidators,
                'MCQ[3].ans_c': anssValidators,
                'MCQ[4].ans_d': ansdValidators
            }
        })

        // Add button click handler
        .on('click', '.addButton', function() {
            bookIndex++;
            var $template = $('#bookTemplate'),
                $clone    = $template
                                .clone()
                                .removeClass('hide')
                                .removeAttr('id')
                                .attr('data-MCQ-index', bookIndex)
                                .insertBefore($template);

            // Update the name attributes
            $clone
                .find('[name="question"]').attr('name', 'MCQ[' + bookIndex + '].question').end()
                .find('[name="ans_a"]').attr('name', 'MCQ[' + bookIndex + '].ans_a').end()
                .find('[name="ans_b"]').attr('name', 'MCQ[' + bookIndex + '].ans_b').end()
                .find('[name="ans_c"]').attr('name', 'MCQ[' + bookIndex + '].ans_c').end()
                .find('[name="ans_d"]').attr('name', 'MCQ[' + bookIndex + '].ans_d').end();

            // Add new fields
            // Note that we also pass the validator rules for new field as the third parameter
            $('#bookForm')
                .formValidation('addField', 'MCQ[' + bookIndex + '].question', questionValidators)
                .formValidation('addField', 'MCQ[' + bookIndex + '].ans_a', ansaValidators)
                .formValidation('addField', 'MCQ[' + bookIndex + '].ans_b', ansbValidators)
                .formValidation('addField', 'MCQ[' + bookIndex + '].ans_c', anscValidators)
                .formValidation('addField', 'MCQ[' + bookIndex + '].ans_d', ansdValidators);
        })

        // Remove button click handler
        .on('click', '.removeButton', function() {
            var $row  = $(this).parents('.form-group'),
                index = $row.attr('data-MCQ-index');

            // Remove fields
            $('#bookForm')
                .formValidation('removeField', $row.find('[name="MCQ[' + index + '].question"]'))
                .formValidation('removeField', $row.find('[name="MCQ[' + index + '].ans_a"]'))
                .formValidation('removeField', $row.find('[name="MCQ[' + index + '].ans_b"]')) 
                .formValidation('removeField', $row.find('[name="MCQ[' + index + '].ans_c"]'))
                .formValidation('removeField', $row.find('[name="MCQ[' + index + '].ans_c"]'));

            // Remove element containing the fields
            $row.remove();
        });
});
</script>


</body>
</html>                             